webpackJsonpSmartEditorViewer([21],{544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FileComponent=undefined;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();var o=n(190);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var r=t.FileComponent=function(e){l(t,e);function t(e){var n=e.initData,i=e.config,o=e.instanceStatus;a(this,t);var l=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o));l._initVar(n,i);l._initComponent();return l}i(t,[{key:"destroy",value:function n(){$jq("body").off("click",this._handleClickOutside)}},{key:"_initVar",value:function r(e,t){this._$elWrap=$jq("#"+e.id);this._$elModule=this._$elWrap.find(".se-module-file");this._$saveBtn=this._$elWrap.find(".se-file-save-button");this._config=t;this._link=e.link;this._onClickDownloadEvent=this._onClickDownloadEvent.bind(this);this._toggleDownloadLayer=this._toggleDownloadLayer.bind(this);this._handleClickOutside=this._handleClickOutside.bind(this)}},{key:"_initComponent",value:function u(){var e=o.Util.isMobile();var t=e||!this._config.downloadTypes||this._config.downloadTypes.length===1;if(t){this._initWithoutDownloadLayer()}else{this._initWithDownloadLayer()}}},{key:"_initWithoutDownloadLayer",value:function c(){this._$saveBtn.addClass("se-file-save-button-activated");this._$saveBtn.on("click",this._onClickDownloadEvent);this.__ON_READY_COMPONENT__("file")}},{key:"_initWithDownloadLayer",value:function f(){this._drawDownloadLayer();this._$saveBtn.on("click",this._toggleDownloadLayer);this._$saveOption.on("click",".se-file-save-option-button",this._onClickDownloadEvent);$jq("body").on("click",this._handleClickOutside);this.__ON_READY_COMPONENT__("file")}},{key:"_handleClickOutside",value:function _(e){var t=$jq(e.target);var n=t.closest(this._$elModule.selector).length===0;n&&this._$saveBtn.removeClass("se-is-activated")}},{key:"_emitDownloadEventBy",value:function d(e){var t=e.type,n=e.event;this.emit("onClickDownload",{type:t,link:this._link,event:n})}},{key:"_onClickDownloadEvent",value:function h(e){var t=$jq(e.currentTarget).data("type");var n=t?t:this._config.downloadTypes&&this._config.downloadTypes[0].name||"local";this._emitDownloadEventBy({type:n,event:e});this._$saveBtn.removeClass("se-is-activated")}},{key:"_toggleDownloadLayer",value:function v(e){e.preventDefault();this._$saveBtn.toggleClass("se-is-activated")}},{key:"_drawDownloadLayer",value:function p(){var e=this;var t="<ul class='se-file-save-option'></ul>";this._$saveBtn.after(t);this._$saveOption=this._$elWrap.find(".se-file-save-option");var n=this._config.downloadTypes;var i=n.map(function(t){return e._getOptionItemsTpl(t)});this._$saveOption.append(i)}},{key:"_getOptionItemsTpl",value:function y(e){return'\n            <li class="se-file-save-option-item">\n                <button type="button" class="se-file-save-option-button se-file-save-option-button-'+e.name+'" data-type="'+e.name+'">\n                    <span class="se-file-save-option-button-label">'+e.desc+"</span>\n                </button>\n            </li>"}}]);return t}(o.AbstractComponent);t["default"]=r}});